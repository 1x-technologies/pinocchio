#
# Copyright (c) 2020-2023 INRIA
#

IF(cppadcg_FOUND AND BUILD_WITH_CODEGEN_SUPPORT AND BUILD_WITH_URDF_SUPPORT)
  FUNCTION(ADD_PINOCCHIO_CPP_CODEGEN_EXAMPLE EXAMPLE)
    INCLUDE_DIRECTORIES(SYSTEM ${cppadcg_INCLUDE_DIR})
    ADD_PINOCCHIO_CPP_EXAMPLE(${EXAMPLE})
    SET_PROPERTY(TARGET example-cpp-${EXAMPLE} PROPERTY CXX_STANDARD 11)
    TARGET_LINK_LIBRARIES(example-cpp-${EXAMPLE} PUBLIC ${CMAKE_DL_LIBS})
    TARGET_COMPILE_DEFINITIONS(example-cpp-${EXAMPLE} PUBLIC PINOCCHIO_CXX_COMPILER=\"${CMAKE_CXX_COMPILER}\")
  ENDFUNCTION()
  
  ADD_PINOCCHIO_CPP_CODEGEN_EXAMPLE(codegen-crba)
  ADD_PINOCCHIO_CPP_CODEGEN_EXAMPLE(codegen-rnea)

  IF(BUILD_PYTHON_INTERFACE)
    SET(${PROJECT_NAME}_CODEGEN_PYTHON_EXAMPLES
      codegen-rnea
       )

    FOREACH(EXAMPLE ${${PROJECT_NAME}_CODEGEN_PYTHON_EXAMPLES})
      ADD_PYTHON_UNIT_TEST("example-py-${EXAMPLE}" "examples/${EXAMPLE}.py" "bindings/python")
    ENDFOREACH(EXAMPLE ${${PROJECT_NAME}_CODEGEN_PYTHON_EXAMPLES})
  ENDIF(BUILD_PYTHON_INTERFACE)

ENDIF(cppadcg_FOUND AND BUILD_WITH_CODEGEN_SUPPORT AND BUILD_WITH_URDF_SUPPORT)
